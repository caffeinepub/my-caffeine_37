{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Admin panel update work: align Production report between Admin/User panels; enhance Work Management as main accounting section; add confirmation popups; UI/UX tweaks; add MT-LOAN and Calculator buttons; header/bottom navigation styling.",
  "architectural_notes": [
    "Work Management is the primary accounting module; user balances are derived from work earnings minus breakfast and payment/loan deductions.",
    "Worker rates are managed per-user (no rate input in Work Management); admin totals are computed from selected workers' existing rates.",
    "Production module is report-only with no financial impact."
  ],
  "known_issues": [
    "No confirm popup appears after submitting forms in Breakfast Management and Payment/Loan Management."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-update-the-admin-production-section-so-it-is-report-only-no-accounting-transactions-keep-the-existing-input-form-and-history-storage-but-do-not-change-any-user-account-balances-when-a-production-entry-is-added-or-deleted",
      "title": "Update the Admin Production section so it is report-only (no accounting/transactions): keep the existing input form and history storage, but do not change any user/account balances when a production entry is added or deleted.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-user-production-report-show-the-exact-same-report-format-data-as-the-admin-production-report-same-fields-aggregation-and-same-source-history-so-both-panels-display-production-reports-consistently",
      "title": "Make the User Production report show the exact same report format/data as the Admin Production report (same fields/aggregation and same source history), so both panels display production reports consistently.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-work-management-to-behave-as-the-main-accounting-section-when-admin-submits-a-work-entry-compute-per-worker-amounts-using-each-selected-worker-s-saved-rates-no-rate-input-in-work-section-compute-and-display-a-grand-total-for-admin-and-credit-each-selected-worker-s-account-balance-as-earnings-not-as-cost",
      "title": "Fix Work Management to behave as the main accounting section: when Admin submits a work entry, compute per-worker amounts using each selected worker’s saved rates (no rate input in Work section), compute and display a grand total for Admin, and credit each selected worker’s account balance as earnings (not as cost).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-deductions-are-reflected-in-each-user-s-balance-nasta-and-payment-loan-submissions-must-continue-to-reduce-the-user-s-net-balance-by-increasing-the-user-s-cost-so-the-final-balance-remaining-amount-equals-earnings-bill-minus-deductions-cost",
      "title": "Ensure deductions are reflected in each user’s balance: Nasta and Payment/Loan submissions must continue to reduce the user’s net balance by increasing the user’s cost, so the final balance/remaining amount equals earnings (bill) minus deductions (cost).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-confirmation-popup-before-saving-submit-in-admin-nasta-management-and-admin-payment-loan-management-matching-the-confirm-flow-already-used-in-production-work-single-confirm-prevents-duplicate-submits",
      "title": "Add a confirmation popup before saving (submit) in Admin Nasta Management and Admin Payment & Loan Management, matching the confirm flow already used in Production/Work (single-confirm, prevents duplicate submits).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-in-system-settings-apply-distinct-button-colors-to-the-four-tabs-label-total-layout-branding-each-tab-visually-different-even-when-not-active",
      "title": "In System Settings, apply distinct button colors to the four tabs: Label, Total, Layout, Branding (each tab visually different even when not active).",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-two-new-admin-header-quick-action-buttons-around-support-chat-1-a-new-button-labeled-mt-loan-placed-to-the-left-of-support-chat-2-a-calculator-button-placed-to-the-right-of-support-chat-wire-them-to-placeholder-actions-e-g-open-a-modal-or-toast-so-they-are-clickable-and-ready-for-future-section-expansion",
      "title": "Add two new Admin header quick-action buttons around Support/Chat: (1) a new button labeled “MT-LOAN” placed to the left of Support/Chat; (2) a Calculator button placed to the right of Support/Chat. Wire them to placeholder actions (e.g., open a modal or toast) so they are clickable and ready for future section expansion.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-admin-header-styling-to-look-cleaner-add-a-subtle-border-and-or-backdrop-blur-and-keep-a-consistent-shadow-so-the-header-is-visually-separated-from-content",
      "title": "Improve Admin header styling to look cleaner: add a subtle border and/or backdrop blur and keep a consistent shadow so the header is visually separated from content.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-adjust-the-bottom-navigation-footer-area-so-the-app-s-own-bottom-buttons-do-not-visually-clash-with-the-phone-s-system-navigation-home-back-recent-add-a-styled-bottom-container-with-clear-separation-and-safe-area-padding",
      "title": "Adjust the bottom navigation/footer area so the app’s own bottom buttons do not visually clash with the phone’s system navigation (home/back/recent): add a styled bottom container with clear separation and safe-area padding.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Production section: no accounting/transactions; show the exact same report in both Admin and User Production pages (report-only).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-2",
      "summary": "Work Management section as main accounting: keep admin report, calculate grand total based on selected workers' existing user rates; user panel credits personal earnings; track balance after breakfast + payment/loan deductions; support two report types (admin vs user).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-3",
      "summary": "Add confirm popup on submit in Breakfast Management and Payment & Loan Management sections.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "System Settings UI: give distinct colors to the four buttons (Label, Total, Layout, Branding).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Admin header: add new button 'MT-LOAN' to the left of Support/Chat for adding sections later.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Add a Calculator button to the right of Support/Chat in Admin panel.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Improve header styling with border/shadow/light background blur for cleaner look.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Mobile UI: add a styled bottom container/border so the app’s bottom buttons don’t visually clash with the phone system navigation buttons (home/back/recent).",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Admin panel accounting & UX updates (Production report parity, Work accounting, confirmations, header/nav tweaks)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}